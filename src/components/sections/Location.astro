---
import { useTranslations, getLangFromUrl } from '../../i18n/ui';
import { Landmark, TreePine, Users, ShoppingBag, Utensils, Store } from 'lucide-astro';

// Get i18n translations
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Location features structure for DRY approach
const locationFeatures = [
  { icon: Landmark, key: 'gallery.location.features.temple' },
  { icon: TreePine, key: 'gallery.location.features.mangrove' },
  { icon: Users, key: 'gallery.location.features.markets' },
  { icon: Utensils, key: 'gallery.location.features.restaurants' },
  { icon: Store, key: 'gallery.location.features.foodStalls' }
];
---

<section id="location" class="location section">
  <div class="container">
    <div class="location-section">
      <div class="location-info">
        <h2 data-i18n-key="gallery.location.title">{t('gallery.location.title')}</h2>
        <p data-i18n-key="gallery.location.description">{t('gallery.location.description')}</p>
        
        <div class="location-features">
          {locationFeatures.map(({ icon: Icon, key }) => (
            <div class="location-feature">
              <div class="feature-icon">
                <Icon size={16} />
              </div>
              <span data-i18n-key={key}>{t(key)}</span>
            </div>
          ))}
        </div>
        
        <div class="guide-link-container">
          <a href="/guide" class="guide-link" data-i18n-key="gallery.location.guideLink">{t('gallery.location.guideLink')}</a>
        </div>
      </div>
      
      <div class="location-map">
        <iframe 
          class="map-iframe"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1924.9440490989714!2d102.49866774589388!3d15.219289032023765!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x311917a1629c1fbf%3A0x682188c4c7576e05!2sPhimai%20Pond%20House!5e0!3m2!1snl!2snl!4v1755585214032!5m2!1snl!2snl"
          allowfullscreen="" 
          loading="lazy" 
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>
  </div>
</section>
