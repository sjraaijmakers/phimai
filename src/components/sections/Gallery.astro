---
import { t } from 'i18next';
import { galleryImages } from '../../data/images';
import { Image } from 'astro:assets';

// Limit gallery to 6 images
const MAX_GALLERY_IMAGES = 8;
const limitedGalleryImages = galleryImages.slice(0, MAX_GALLERY_IMAGES);
---

<!-- Gallery Content -->
<div class="section-header">
  <h2 class="section-title">{t('gallery.title')}</h2>
  <p class="section-subtitle">{t('gallery.subtitle')}</p>
</div>

<div class="gallery-grid">
  {
    limitedGalleryImages.map((image) => (
      <a
        href={image.src}
        class="gallery-item glightbox"
        data-gallery="home-gallery"
        data-title={image.captionKey ? t(image.captionKey) : ''}
        aria-label={image.captionKey ? t(image.captionKey) : 'Open image'}
      >
        <Image
          src={image.src}
          alt={image.captionKey ? t(image.captionKey) : ''}
          width={400}
          height={300}
          format="webp"
          quality={80}
        />
      </a>
    ))
  }
</div>

<script>
  import GLightbox from 'glightbox';
  import 'glightbox/dist/css/glightbox.min.css';

  document.addEventListener('DOMContentLoaded', () => {
    GLightbox({
      selector: '.glightbox[data-gallery="home-gallery"]',
      touchNavigation: true,
      loop: true,
      autoplayVideos: false,
      keyboardNavigation: true,
      closeOnOutsideClick: true,
    });
  });
</script>

<style>
  /* ===== GALLERY CONTENT STYLES ===== */
  .section-header {
    text-align: center;
    margin-bottom: var(--space-3xl);
  }

  .section-title {
    margin-bottom: var(--space-lg);
  }

  .section-subtitle {
    color: var(--color-text-light);
    max-width: 600px;
    margin: 0 auto;
  }

  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: var(--space-lg);
    position: relative;
    z-index: 2;
  }

  .gallery-item {
    position: relative;
    border-radius: var(--radius);
    overflow: hidden;
    cursor: pointer;
    transition: var(--transition);
    box-shadow: var(--shadow-md);
  }

  .gallery-item img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    transition: transform 0.3s ease;
  }
  /* ===== RESPONSIVE DESIGN ===== */
  @media (max-width: 480px) {
    .gallery-grid {
      grid-template-columns: 1fr;
      gap: var(--space);
    }

    .gallery-item img {
      height: 200px;
    }
  }
</style>
