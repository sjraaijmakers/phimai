---
import { languages, defaultLang } from '../i18n/ui';
---

<div class="language-selector">
  <label for="language-select">Language</label>
  <select id="language-select" class="language-select">
    {Object.entries(languages).map(([code, name]) => (
      <option value={code} selected={code === defaultLang}>
        {name}
      </option>
    ))}
  </select>
</div>

<script>
  import { setLanguage, getCurrentLanguage } from '../i18n/client';

  // Language switching
  document.addEventListener('DOMContentLoaded', () => {
    const languageSelect = document.getElementById('language-select') as HTMLSelectElement;

    if (!languageSelect) return;

    // Set initial language from localStorage
    const currentLang = getCurrentLanguage();
    languageSelect.value = currentLang;

    // Handle language change
    languageSelect.addEventListener('change', (e) => {
      const selectedLang = (e.target as HTMLSelectElement).value;
      setLanguage(selectedLang);
    });
  });
</script>


